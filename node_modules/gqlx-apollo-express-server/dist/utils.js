"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSubscriptionEndpoint = exports.tryParseJson = exports.defaultErrorLogger = void 0;
const constants_1 = require("./constants");
function defaultErrorLogger(path, details) {
    console.error(`Encountered an error at "%s": %s`, path, details);
}
exports.defaultErrorLogger = defaultErrorLogger;
function tryParseJson(message) {
    if (message) {
        try {
            return JSON.parse(message);
        }
        catch (_) { }
    }
    return message;
}
exports.tryParseJson = tryParseJson;
function getSubscriptionEndpoint(host, path = constants_1.defaultSubscriptionsPath) {
    host = host.replace('http', 'ws');
    if (!path.startsWith('/') && !host.endsWith('/')) {
        return `${host}/${path}`;
    }
    else if (path.startsWith('/') && host.endsWith('/')) {
        return `${host}/${path.substring(1)}`;
    }
    return `${host}${path}`;
}
exports.getSubscriptionEndpoint = getSubscriptionEndpoint;
//# sourceMappingURL=utils.js.map